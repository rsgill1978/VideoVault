<!--
    VideoPlayerControl.axaml

    Video player control with LibVLC rendering and playback controls.

    Layout Structure:
    - Panel contains two child elements
    - Grid with video area and normal mode controls
    - DockPanel with fullscreen overlay controls

    Normal Mode:
    - Grid controls are visible at bottom
    - DockPanel overlay is hidden

    Fullscreen Mode:
    - Grid controls are hidden
    - DockPanel overlay is visible with controls docked to bottom
    - Controls auto-hide after 3 seconds without mouse movement
    - Semi-transparent background on controls for visibility
-->
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="VideoVault.Controls.VideoPlayerControl">

    <!-- Container for normal and fullscreen layouts -->
    <Panel>
        <!-- Normal mode layout -->
        <Grid RowDefinitions="*,Auto" Name="NormalLayout" ZIndex="0">

            <!-- Video display area -->
            <Panel Grid.Row="0" Background="Black" Name="VideoContainer">

                <!-- LibVLC video renderer -->
                <!-- Replaced at runtime with VlcNativeControlHost -->
                <NativeControlHost Name="VideoHost" IsVisible="True"
                                 HorizontalAlignment="Stretch"
                                 VerticalAlignment="Stretch"/>

                <!-- Shown when no video is loaded -->
                <TextBlock Text="No video loaded"
                          Foreground="White"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          Name="NoVideoText"/>
            </Panel>

            <!-- Normal mode controls at bottom -->
            <Border Grid.Row="1"
                    Background="#F0F0F0"
                    Padding="10"
                    Name="PlayerControls">

                <!-- Play button, progress slider, volume, fullscreen button -->
                <Grid ColumnDefinitions="Auto,*,Auto,Auto">

                    <!-- Play/Pause button -->
                    <Button Grid.Column="0" Name="PlayPauseButton" Click="PlayPauseButton_Click"
                           Width="40" Height="40" Margin="0,0,10,0">
                        <TextBlock Text="â–¶" FontSize="20" HorizontalAlignment="Center"/>
                    </Button>

                    <!-- Progress slider and time display -->
                    <Grid Grid.Column="1" RowDefinitions="Auto,Auto">

                        <!-- Seek slider -->
                        <Slider Grid.Row="0" Name="ProgressSlider"
                               Minimum="0" Maximum="100"
                               ValueChanged="ProgressSlider_ValueChanged"/>

                        <!-- Current time and duration -->
                        <Grid Grid.Row="1" ColumnDefinitions="Auto,*,Auto" Margin="0,5,0,0">

                            <TextBlock Grid.Column="0" Name="TimeText" Text="00:00:00"
                                     FontSize="11" VerticalAlignment="Center"/>

                            <TextBlock Grid.Column="2" Name="DurationText" Text="00:00:00"
                                     FontSize="11" VerticalAlignment="Center"/>
                        </Grid>
                    </Grid>

                    <!-- Volume controls -->
                    <Grid Grid.Column="2" ColumnDefinitions="Auto,Auto" Margin="10,0,10,0">

                        <!-- Mute button -->
                        <Button Grid.Column="0" Name="VolumeButton" Click="VolumeButton_Click"
                               Width="40" Height="40">
                            <TextBlock Text="ðŸ”Š" FontSize="16"/>
                        </Button>

                        <!-- Volume slider -->
                        <Slider Grid.Column="1" Name="VolumeSlider"
                               Width="100" Minimum="0" Maximum="100" Value="100"
                               ValueChanged="VolumeSlider_ValueChanged"
                               VerticalAlignment="Center"/>
                    </Grid>

                    <!-- Fullscreen button -->
                    <Button Grid.Column="3" Name="FullscreenButton" Click="FullscreenButton_Click"
                           Width="40" Height="40">
                        <TextBlock Text="â›¶" FontSize="20"/>
                    </Button>

                </Grid>
            </Border>

        </Grid>

        <!-- Fullscreen overlay controls -->
        <!-- Hidden in normal mode, visible in fullscreen -->
        <DockPanel Name="FullscreenControlsCanvas"
                   IsVisible="False"
                   ZIndex="100"
                   HorizontalAlignment="Stretch"
                   VerticalAlignment="Stretch"
                   LastChildFill="False">

            <!-- Controls docked to bottom with semi-transparent background -->
            <Border Name="FullscreenControls"
                    DockPanel.Dock="Bottom"
                    Background="#CC000000"
                    Padding="20"
                    HorizontalAlignment="Stretch">

            <Grid ColumnDefinitions="Auto,*,Auto,Auto">

                <!-- Play/Pause button -->
                <Button Grid.Column="0" Name="FullscreenPlayPauseButton" Click="PlayPauseButton_Click"
                       Width="40" Height="40" Margin="0,0,10,0">
                    <TextBlock Name="FullscreenPlayPauseIcon" Text="â–¶" FontSize="20" HorizontalAlignment="Center" Foreground="White"/>
                </Button>

                <!-- Progress slider and time display -->
                <Grid Grid.Column="1" RowDefinitions="Auto,Auto">
                    <Slider Grid.Row="0" Name="FullscreenProgressSlider"
                           Minimum="0" Maximum="100"
                           ValueChanged="ProgressSlider_ValueChanged"/>

                    <Grid Grid.Row="1" ColumnDefinitions="Auto,*,Auto" Margin="0,5,0,0">
                        <TextBlock Grid.Column="0" Name="FullscreenTimeText" Text="00:00:00"
                                 FontSize="11" VerticalAlignment="Center" Foreground="White"/>
                        <TextBlock Grid.Column="2" Name="FullscreenDurationText" Text="00:00:00"
                                 FontSize="11" VerticalAlignment="Center" Foreground="White"/>
                    </Grid>
                </Grid>

                <!-- Volume controls -->
                <Grid Grid.Column="2" ColumnDefinitions="Auto,Auto" Margin="10,0,10,0">
                    <Button Grid.Column="0" Name="FullscreenVolumeButton" Click="VolumeButton_Click"
                           Width="40" Height="40">
                        <TextBlock Name="FullscreenVolumeIcon" Text="ðŸ”Š" FontSize="16" Foreground="White"/>
                    </Button>

                    <Slider Grid.Column="1" Name="FullscreenVolumeSlider"
                           Width="100" Minimum="0" Maximum="100" Value="100"
                           ValueChanged="VolumeSlider_ValueChanged"
                           VerticalAlignment="Center"/>
                </Grid>

                <!-- Exit fullscreen button -->
                <Button Grid.Column="3" Name="FullscreenExitButton" Click="FullscreenButton_Click"
                       Width="40" Height="40">
                    <TextBlock Text="â›¶" FontSize="20" Foreground="White"/>
                </Button>

            </Grid>
            </Border>

        </DockPanel>

    </Panel>
</UserControl>
